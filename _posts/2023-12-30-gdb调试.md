---
layout: post
title:  "gdb调试"
categories: gdb
---

## 线程调试

1. 查看所有线程
{% highlight bash %}
info threads
{% endhighlight %}

2. 查找线程
{% highlight ruby %}
thread find

thread find 1
thread find 线程名
{% endhighlight %}

3. 切换线程
{% highlight ruby %}
thread num
{% endhighlight %}

4. 设置线程名字
{% highlight bash %}
thread name
{% endhighlight %}

5. 为线程设置断点
{% highlight bash %}
breakpoint 行号 thread id`
{% endhighlight %}

6. 为线程执行命令

{% highlight bash %}
thread apply

thread apply 1 info locals
thread apply 1-3 info args
thread apply 1`3 5 info locals
thread apply all info locals
thread apply 1 -s info abc # 加-s后，出现错误不提示
thread apply 1 -q info locals # 加-q后，不显示线程信息
{% endhighlight %}

7. 锁定线程
{% highlight bash %}
set scheduler-locking off|on|step

show print thread-events # 如果是on那么会打印线程创建和销毁信息
set print thread-events off
set print thread-events on
{% endhighlight %}
